name: Email Jobs - Trial e RenovaÃ§Ã£o
on:
  schedule:
    # 9h Brasil (12h UTC) - ManhÃ£
    - cron: '0 12 * * *'
    # 15h Brasil (18h UTC) - Tarde
    - cron: '0 18 * * *'
    # 22h Brasil (01h UTC do dia seguinte) - Noite  
    - cron: '0 1 * * *'
  
  # Permite execuÃ§Ã£o manual no GitHub
  workflow_dispatch:
jobs:
  email-notifications:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“§ Enviar Avisos de RenovaÃ§Ã£o
        run: |
          echo "ğŸ”„ Enviando avisos de renovaÃ§Ã£o..."
          curl -X POST https://app-geminii.railway.app/api/subscriptions/cron/send-warnings || echo "âŒ Falha nos avisos"
          
      - name: ğŸ¯ Processar Trials Expirados  
        run: |
          echo "ğŸ”„ Processando trials expirados..."
          curl -X POST https://app-geminii.railway.app/api/subscriptions/cron/process-expired || echo "âŒ Falha no processamento"
          
      - name: âœ… Jobs ConcluÃ­dos
        run: |
          echo "ğŸ‰ VerificaÃ§Ãµes de email concluÃ­das!"