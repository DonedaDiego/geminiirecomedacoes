name: Email Jobs - Trial e Renova√ß√£o
on:
  schedule:
    # 9h Brasil (12h UTC) - Manh√£
    - cron: '0 12 * * *'
    # 15h Brasil (18h UTC) - Tarde
    - cron: '0 18 * * *'
    # 22h Brasil (01h UTC do dia seguinte) - Noite  
    - cron: '0 1 * * *'
  
  # Permite execu√ß√£o manual no GitHub
  workflow_dispatch:
jobs:
  email-notifications:
    runs-on: ubuntu-latest
    steps:
      - name: üìß Enviar Avisos de Renova√ß√£o
        run: |
          echo " Enviando avisos de renova√ß√£o..."
          curl -X POST https://app-geminii.railway.app/api/subscriptions/cron/send-warnings || echo " Falha nos avisos"
          
      - name:  Processar Trials Expirados  
        run: |
          echo " Processando trials expirados..."
          curl -X POST https://app-geminii.railway.app/api/subscriptions/cron/process-expired || echo " Falha no processamento"
          
      - name:  Jobs Conclu√≠dos
        run: |
          echo " Verifica√ß√µes de email conclu√≠das!"