<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Geminii Tech</title>
  <link rel="icon" type="image/png" sizes="32x32" href="assets/logo.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#6366f1',
            secondary: '#8b5cf6',
            accent: '#06b6d4',
            success: '#10b981',
            warning: '#f59e0b',
            danger: '#ef4444',
            geminii: '#ba39af'
          }
        }
      }
    }
    
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #0f0f0f;
    }
    
    .card {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    }
    
    .dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: rgba(20, 20, 25, 0.98); 
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2); 
      border-radius: 16px;
      padding: 12px;
      margin-top: 8px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      z-index: 50;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.8); 
    }
    
    .dropdown.show {
      opacity: 1 !important;
      visibility: visible !important;
      transform: translateY(0) !important;
      display: block !important;
    }
    
    .navbar {
      background: rgba(15, 15, 15, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #6366f1, #8b5cf6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #6366f1, #8b5cf6);
      border: none;
      color: white;
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
    }
    
    .community-badge {
      background: linear-gradient(135deg, #ba39af, #6366f1);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .free-badge {
      background: linear-gradient(135deg, #10b981, #06b6d4);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .trial-badge {
      background: linear-gradient(135deg, #f59e0b, #ef4444);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    /* FORÇA SEMPRE MOSTRAR DROPDOWNS */
    .tool-card {
      opacity: 1 !important;
      cursor: pointer !important;
      pointer-events: auto !important;
    }
    
    .dropdown a,
    .dropdown div {
      background-color: rgba(30, 30, 35, 0.6) !important;
      color: white !important;
    }

    .dropdown a:hover,
    .dropdown div:hover {
      background-color: rgba(50, 50, 60, 0.8) !important;
    }


    /* Cards de Em Breve */
    .coming-soon-card {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 140, 0, 0.05));
      border: 2px solid rgba(255, 215, 0, 0.3);
      position: relative;
      overflow: hidden;
    }

    .coming-soon-card::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -100%;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, transparent, #ffd700, transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    .coming-soon-badge {
      background: linear-gradient(135deg, #ffd700, #ff8c00);
      color: #000;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 10px;
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      animation: pulse 2s infinite;
    }

    .notify-btn {
      background: linear-gradient(135deg, #10b981, #06b6d4);
      border: none;
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .notify-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
    }

    .progress-bar {
      width: 100%;
      height: 4px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2px;
      overflow: hidden;
      margin: 8px 0;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #10b981, #06b6d4);
      border-radius: 2px;
      transition: width 0.3s ease;
    }

    .dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: rgba(20, 20, 25, 0.98); 
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2); 
      border-radius: 16px;
      padding: 12px;
      margin-top: 8px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      z-index: 1000; /* AUMENTAR O Z-INDEX */
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.8); 
    }

    .dropdown.show {
      opacity: 1 !important;
      visibility: visible !important;
      transform: translateY(0) !important;
      display: block !important;
      z-index: 1000 !important; /* GARANTIR QUE FIQUE POR CIMA */
    }

    /* Garantir que os cards de ferramentas tenham z-index menor */
    .tool-card {
      position: relative;
      z-index: 10;
    }

    /* Garantir que a seção "Em Desenvolvimento" não interfira */
    .card {
      position: relative;
      z-index: 1;
    }

    /* Netflix-style Content Hub */
    .netflix-container {
      position: relative;
      overflow: hidden;
    }

    .netflix-scroller {
      position: relative;
      display: flex;
      align-items: center;
    }

    .netflix-row {
      display: flex;
      gap: 12px;
      padding: 0 50px;
      overflow-x: auto;
      scroll-behavior: smooth;
      scrollbar-width: none;
      -ms-overflow-style: none;
      transition: transform 0.3s ease;
    }

    .netflix-row::-webkit-scrollbar {
      display: none;
    }

    .netflix-item {
      flex: 0 0 240px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .netflix-item:hover {
      transform: scale(1.05) translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
      border-color: rgba(99, 102, 241, 0.3);
      z-index: 10;
    }

    .netflix-thumbnail {
      position: relative;
      width: 100%;
      height: 135px;
      overflow: hidden;
    }

    .netflix-thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .netflix-item:hover .netflix-thumbnail img {
      transform: scale(1.1);
    }

    .netflix-play-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 50px;
      height: 50px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: all 0.3s ease;
    }

    .netflix-item:hover .netflix-play-overlay {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1.1);
    }

    .netflix-play-overlay i {
      color: #000;
      font-size: 18px;
      margin-left: 3px;
    }

    .social-overlay {
      position: absolute;
      top: 12px;
      right: 12px;
      background: rgba(0, 0, 0, 0.8);
      border-radius: 20px;
      padding: 6px 12px;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      font-weight: 600;
    }

    .social-overlay i {
      font-size: 14px;
    }

    .netflix-info {
      padding: 16px;
    }

    .netflix-info h4 {
      color: white;
      font-size: 14px;
      font-weight: 600;
      margin: 0 0 4px 0;
      line-height: 1.3;
    }

    .netflix-info p {
      color: #9ca3af;
      font-size: 12px;
      margin: 0;
      line-height: 1.4;
    }

    .netflix-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.7);
      border: none;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 20;
      opacity: 0;
      transition: all 0.3s ease;
      font-size: 16px;
    }

    .netflix-container:hover .netflix-nav {
      opacity: 1;
    }

    .netflix-nav:hover {
      background: rgba(0, 0, 0, 0.9);
      transform: translateY(-50%) scale(1.1);
    }

    .netflix-nav-left {
      left: 10px;
    }

    .netflix-nav-right {
      right: 10px;
    }

    .social-item .netflix-thumbnail {
      height: 200px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .netflix-item {
        flex: 0 0 180px;
      }
      
      .netflix-thumbnail {
        height: 100px;
      }
      
      .social-item .netflix-thumbnail {
        height: 150px;
      }
      
      .netflix-row {
        padding: 0 20px;
      }
    }

    /* Versão com ícones bem pequenos e minimalistas */
    .social-item .netflix-thumbnail img {
      width: 50px !important;
      height: 50px !important;
      object-fit: contain !important;
      padding: 12px;
      border-radius: 8px;
      background: transparent;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .social-item .netflix-thumbnail {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

  </style>
</head>
<body class="min-h-screen">
  
  <!-- Navigation -->
  <nav class="navbar fixed top-0 left-0 right-0 z-50 px-6 py-4">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
      <div class="flex items-center space-x-8">
        <div class="flex items-center space-x-3">
          <img src="assets/logo.png" alt="Geminii Logo" class="w-8 h-8 rounded-lg" onerror="this.src='/assets/logo.png'; this.onerror=null;">
          <span class="text-xl font-bold text-white">Geminii</span>
        </div>
        <div class="hidden md:flex items-center space-x-6">
          <a href="dashboard.html" class="text-primary font-semibold">Dashboard</a>
        </div>
      </div>
  
      <div class="flex items-center space-x-4">
        <div id="statusIndicator" class="flex items-center space-x-2">
          <div class="w-2 h-2 bg-success rounded-full animate-pulse"></div>
          <span class="text-sm text-gray-300">Online</span>
        </div>
        <button onclick="logout()" class="bg-red-50 hover:bg-red-100 text-red-600 px-4 py-2 rounded-lg text-sm font-medium transition-colors">
          Sair
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="pt-20 px-6 pb-96">
    <div class="max-w-7xl mx-auto">

      <!-- Header Section -->
      <div class="card rounded-2xl p-8 mb-8">
        <div class="flex flex-col lg:flex-row items-center gap-8">
          <div class="flex-shrink-0">
            <div id="userAvatar" class="w-20 h-20 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white text-xl font-bold shadow-lg">
              <span id="userInitials">U</span>
            </div>
          </div>
          
          <div class="flex-1 text-center lg:text-left">
            <h1 class="text-4xl font-bold text-white mb-2">
              Bem-vindo, <span id="userName" class="gradient-text">Usuário</span>
            </h1>
            <p class="text-gray-300 text-lg mb-4" id="userEmail">Bem-vindo à Geminii</p>
            
            <div class="flex flex-col sm:flex-row items-center gap-4 mb-6">
              <span id="userPlanBadge" class="free-badge">
                <i class="fas fa-user"></i>
                Plano Free
              </span>
              <div class="text-sm text-gray-400">
                <i class="fas fa-calendar mr-2"></i>
                Membro desde: <span id="memberSince">2025</span>
              </div>
              <div id="trialInfo" class="text-sm text-warning hidden">
                <i class="fas fa-clock mr-2"></i>
                Trial: <span id="trialDaysLeft">--</span> dias restantes
              </div>
            </div>
            
            <!-- Redes Sociais -->
            <div class="flex flex-wrap justify-center lg:justify-start gap-3">
              <a href="https://discord.com/channels/1387417259621744731/1387417260536369335" target="_blank" class="flex items-center gap-2 bg-white/10 hover:bg-white/20 text-white px-3 py-2 rounded-lg text-sm transition-colors">
                <i class="fab fa-discord text-blue-400"></i>
                Discord
              </a>
              <a href="https://instagram.com/geminiiresearch" target="_blank" class="flex items-center gap-2 bg-white/10 hover:bg-white/20 text-white px-3 py-2 rounded-lg text-sm transition-colors">
                <i class="fab fa-instagram text-pink-400"></i>
                Instagram
              </a>
              <a href="https://linkedin.com/company/geminii-research" target="_blank" class="flex items-center gap-2 bg-white/10 hover:bg-white/20 text-white px-3 py-2 rounded-lg text-sm transition-colors">
                <i class="fab fa-linkedin text-blue-500"></i>
                LinkedIn
              </a>
              <a href="https://x.com/geminiiresearch" target="_blank" class="flex items-center gap-2 bg-white/10 hover:bg-white/20 text-white px-2 py-1 rounded-lg text-sm transition-colors">
                <i class="fab fa-x-twitter text-white"></i>
                X  
              </a>
            </div>
          </div>
          
          <div class="flex flex-col gap-3">
            <a href="https://www.youtube.com/@geminiiresearch?sub_confirmation=1" class="btn-primary px-6 py-3 rounded-xl font-semibold inline-block text-center" target="_blank">
              <i class="fab fa-youtube mr-2"></i>Canal YouTube
            </a>
            <a href="planos.html" target="_blank" id="upgradeBtn" class="bg-gradient-to-r from-warning to-danger text-white px-6 py-3 rounded-xl font-semibold hidden inline-block text-center">
              <i class="fas fa-crown mr-2"></i>Upgrade para Comunidade
            </a>
          </div>
        </div>
      </div>
     
      <!-- Plans Section - Inserir APÓS o Header Section e ANTES do Recommendations Free Card -->
      <div class="card rounded-2xl p-6 mb-8">
        <div class="flex items-center justify-between mb-4">
          <div>
            <h2 class="text-xl font-bold text-white mb-1 flex items-center">
              <i class="fas fa-crown text-warning mr-3"></i>
              Geminii Streaming
            </h2>
            <p class="text-gray-300 text-sm">Confira alguns dos conteúdos exclusivos que compartilhamos em nossas redes sociais</p>
          </div>
          <div class="flex items-center gap-2">
            <span class="bg-gradient-to-r from-warning to-danger text-white px-2 py-1 rounded-full text-xs font-bold">
              <i class="fas fa-fire mr-1"></i>
              Social
            </span>
          </div>
        </div>


         <!-- Content Hub Section - INSERIR AQUI APÓS PLANS SECTION -->
          <div class="card rounded-2xl p-8 mb-8">
            <div class="flex items-center justify-between mb-6">
              <div>
                <h2 class="text-2xl font-bold text-white mb-2 flex items-center">
                  <i class="fas fa-play text-red-500 mr-3"></i>
                  Geminii Hub
                </h2>
                <p class="text-gray-300">Conteúdos exclusivos, análises e insights do mercado</p>
              </div>
              <div class="flex items-center gap-2">
                <span class="bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1 rounded-full text-xs font-bold">
                  <i class="fas fa-fire mr-1"></i>
                  CONTEÚDO
                </span>
              </div>
            </div>

            <!-- YouTube Videos Section -->
            <div class="mb-8">
              <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                <i class="fab fa-youtube text-red-500 mr-2"></i>
                Últimos Vídeos
              </h3>
              
              <div class="netflix-container">
                <div class="netflix-scroller" id="videoScroller">
                  <button class="netflix-nav netflix-nav-left" id="videoNavLeft">
                    <i class="fas fa-chevron-left"></i>
                  </button>
                  
                  <div class="netflix-row" id="videoRow">
                    <!-- Video 1 -->
                    <div class="netflix-item" onclick="openVideo('https://youtube.com/@geminiiresearch')">
                      <div class="netflix-thumbnail">
                        <img src="https://via.placeholder.com/300x169/1a1a1a/ffffff?text=Video+1" alt="Análise Semanal">
                        <div class="netflix-play-overlay">
                          <i class="fas fa-play"></i>
                        </div>
                      </div>
                      <div class="netflix-info">
                        <h4>O Que é Volatilidade</h4>
                        <p>Perspectivas simples das volatilidade </p>
                      </div>
                    </div>

                    <!-- Video 2 -->
                    <div class="netflix-item" onclick="openVideo('https://youtube.com/@geminiiresearch')">
                      <div class="netflix-thumbnail">
                        <img src="https://via.placeholder.com/300x169/2a2a2a/ffffff?text=Video+2" alt="Tutorial ML">
                        <div class="netflix-play-overlay">
                          <i class="fas fa-play"></i>
                        </div>
                      </div>
                      <div class="netflix-info">
                        <h4>Machine Learning no Trading</h4>
                        <p>Como usar IA para investir</p>
                      </div>
                    </div>

                    <!-- Video 3 -->
                    <div class="netflix-item" onclick="openVideo('https://youtube.com/@geminiiresearch')">
                      <div class="netflix-thumbnail">
                        <img src="https://via.placeholder.com/300x169/3a3a3a/ffffff?text=Video+3" alt="Opções">
                        <div class="netflix-play-overlay">
                          <i class="fas fa-play"></i>
                        </div>
                      </div>
                      <div class="netflix-info">
                        <h4>Beta de uma ação</h4>
                        <p>Onde está o Risco</p>
                      </div>
                    </div>

                    <!-- Video 4 -->
                    <div class="netflix-item" onclick="openVideo('https://youtube.com/@geminiiresearch')">
                      <div class="netflix-thumbnail">
                        <img src="https://via.placeholder.com/300x169/4a4a4a/ffffff?text=Video+4" alt="Mercado">
                        <div class="netflix-play-overlay">
                          <i class="fas fa-play"></i>
                        </div>
                      </div>
                      <div class="netflix-info">
                        <h4>Montando um Coe</h4>
                        <p>Aprenda vocÊ mesmo a montar seu COE</p>
                      </div>
                    </div>

                    <!-- Video 5 -->
                    <div class="netflix-item" onclick="openVideo('https://youtube.com/@geminiiresearch')">
                      <div class="netflix-thumbnail">
                        <img src="https://via.placeholder.com/300x169/5a5a5a/ffffff?text=Video+5" alt="Tutorial">
                        <div class="netflix-play-overlay">
                          <i class="fas fa-play"></i>
                        </div>
                      </div>
                      <div class="netflix-info">
                        <h4>Introdução à Ciência de Dados</h4>
                        <p>Para o Mercado Financeiro</p>
                      </div>
                    </div>

                    <!-- Video 6 -->
                    <div class="netflix-item" onclick="openVideo('https://youtube.com/@geminiiresearch')">
                      <div class="netflix-thumbnail">
                        <img src="https://via.placeholder.com/300x169/6a6a6a/ffffff?text=Video+6" alt="Live">
                        <div class="netflix-play-overlay">
                          <i class="fas fa-play"></i>
                        </div>
                      </div>
                      <div class="netflix-info">
                        <h4>Live: Comunidade Fabiones</h4>
                        <p>Aberura da Comunidade</p>
                      </div>
                    </div>
                  </div>

                  <button class="netflix-nav netflix-nav-right" id="videoNavRight">
                    <i class="fas fa-chevron-right"></i>
                  </button>
                </div>
              </div>
            </div>

            <!-- Social Feed Section -->
            <div>
              <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                <i class="fas fa-hashtag text-primary mr-2"></i>
                Feed Social
              </h3>
              
              <div class="netflix-container">
                <div class="netflix-scroller" id="socialScroller">
                  <button class="netflix-nav netflix-nav-left" id="socialNavLeft">
                    <i class="fas fa-chevron-left"></i>
                  </button>
                  
                  <div class="netflix-row" id="socialRow">
                    <!-- Post Instagram 1 -->
                    <div class="netflix-item social-item" onclick="openSocial('https://instagram.com/geminiiresearch')">
                      <div class="netflix-thumbnail social-thumbnail">
                        <img src="https://via.placeholder.com/300x300/E4405F/ffffff?text=IG+Post" alt="Instagram Post">
                        <div class="social-overlay">
                          <i class="fab fa-instagram"></i>
                          <span>Instagram</span>
                        </div>
                      </div>
                      <div class="netflix-info">
                        <h4>Dica de Trading</h4>
                        <p>Gestão de risco em opções</p>
                      </div>
                    </div>

                    <!-- Post X/Twitter 1 -->
                    <div class="netflix-item social-item" onclick="openSocial('https://x.com/geminiiresearch')">
                      <div class="netflix-thumbnail social-thumbnail">
                        <img src="https://via.placeholder.com/300x300/1DA1F2/ffffff?text=X+Post" alt="X Post">
                        <div class="social-overlay">
                          <i class="fab fa-x-twitter"></i>
                          <span>X (Twitter)</span>
                        </div>
                      </div>
                      <div class="netflix-info">
                        <h4>Análise Rápida</h4>
                        <p>PETR4 rompeu resistência</p>
                      </div>
                    </div>

                    <!-- Post Instagram 2 -->
                    <div class="netflix-item social-item" onclick="openSocial('https://instagram.com/geminiiresearch')">
                      <div class="netflix-thumbnail social-thumbnail">
                        <img src="https://via.placeholder.com/300x300/E4405F/ffffff?text=Story" alt="Instagram Story">
                        <div class="social-overlay">
                          <i class="fab fa-instagram"></i>
                          <span>Stories</span>
                        </div>
                      </div>
                      <div class="netflix-info">
                        <h4>Behind the Scenes</h4>
                        <p>Bastidores da análise</p>
                      </div>
                    </div>

                    <!-- Post X/Twitter 2 -->
                    <div class="netflix-item social-item" onclick="openSocial('https://x.com/geminiiresearch')">
                      <div class="netflix-thumbnail social-thumbnail">
                        <img src="https://via.placeholder.com/300x300/1DA1F2/ffffff?text=Thread" alt="X Thread">
                        <div class="social-overlay">
                          <i class="fab fa-x-twitter"></i>
                          <span>Thread</span>
                        </div>
                      </div>
                      <div class="netflix-info">
                        <h4>Thread: Volatilidade</h4>
                        <p>Como interpretar o VIX</p>
                      </div>
                    </div>

                    <!-- Post Instagram 3 -->
                    <div class="netflix-item social-item" onclick="openSocial('https://instagram.com/geminiiresearch')">
                      <div class="netflix-thumbnail social-thumbnail">
                        <img src="https://via.placeholder.com/300x300/E4405F/ffffff?text=Reel" alt="Instagram Reel">
                        <div class="social-overlay">
                          <i class="fab fa-instagram"></i>
                          <span>Reels</span>
                        </div>
                      </div>
                      <div class="netflix-info">
                        <h4>Tutorial Rápido</h4>
                        <p>Como usar o RSL Radar</p>
                      </div>
                    </div>

                    <!-- Post X/Twitter 3 -->
                    <div class="netflix-item social-item" onclick="openSocial('https://x.com/geminiiresearch')">
                      <div class="netflix-thumbnail social-thumbnail">
                        <img src="https://via.placeholder.com/300x300/1DA1F2/ffffff?text=Poll" alt="X Poll">
                        <div class="social-overlay">
                          <i class="fab fa-x-twitter"></i>
                          <span>Enquete</span>
                        </div>
                      </div>
                      <div class="netflix-info">
                        <h4>Sua Opinião</h4>
                        <p>IBOV: Alta ou Baixa?</p>
                      </div>
                    </div>
                  </div>

                  <button class="netflix-nav netflix-nav-right" id="socialNavRight">
                    <i class="fas fa-chevron-right"></i>
                  </button>
                </div>
              </div>
            </div>
          </div> 

                               
        <!-- CTA Section -->
        <div class="mt-6 text-center">
          <div class="bg-gradient-to-r from-warning/10 to-danger/10 border border-warning/20 rounded-lg p-4">
            <h3 class="text-lg font-bold text-white mb-2">
              <i class="fas fa-chart-bar mr-2"></i>
              Geminii é uma research independente
            </h3>
            <p class="text-gray-300 text-sm mb-4">Preza muito pela transparência e relacionamento com o cliente, sempre otimizando os processos para recomendações precisas e sem viés, apenas com dados</p>
            <div class="flex justify-center">
              <a href="http://www.geminii.com.br/" id="saibaMaisLink" target="_blank" class="bg-gradient-to-r from-warning to-danger text-white px-6 py-2 rounded-lg font-semibold inline-flex items-center justify-center text-sm">
                <i class="fas fa-info-circle mr-2"></i>
                Saiba Mais
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Recommendations Free Card -->
      <div class="card rounded-2xl p-8 mb-8">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h2 class="text-2xl font-bold text-white mb-2 flex items-center">
              <i class="fas fa-gift text-geminii mr-3"></i>
              Recomendações Gratuitas
            </h2>
            <p class="text-gray-300">Análises mensais disponíveis para todos os usuários</p>
          </div>
          <a href="recomendacoes-free.html" class="btn-primary px-6 py-3 rounded-xl font-semibold inline-flex items-center">
            <i class="fas fa-chart-line mr-2"></i>
            Ver Recomendações
          </a>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="bg-white/5 rounded-lg p-4">
            <div class="flex items-center justify-between mb-2">
              <span class="text-gray-400">Sinais Ativos</span>
              <i class="fas fa-signal text-accent"></i>
            </div>
            <div class="text-2xl font-bold text-white" id="activeSignalsCount">--</div>
            <div class="text-sm text-gray-400">Atualizados em tempo real</div>
          </div>
          
          <div class="bg-white/5 rounded-lg p-4">
            <div class="flex items-center justify-between mb-2">
              <span class="text-gray-400">Taxa de Acerto</span>
              <i class="fas fa-bullseye text-success"></i>
            </div>
            <div class="text-2xl font-bold text-success" id="freeSuccessRate">--</div>
            <div class="text-sm text-gray-400">Últimos 30 dias</div>
          </div>
          
          <div class="bg-white/5 rounded-lg p-4">
            <div class="flex items-center justify-between mb-2">
              <span class="text-gray-400">Próxima Atualização</span>
              <i class="fas fa-calendar text-warning"></i>
            </div>
            <div class="text-2xl font-bold text-white" id="nextUpdateDays">--</div>
            <div class="text-sm text-gray-400">Mensal</div>
          </div>
        </div>
      </div>

      <!-- Tools Section -->
      <div class="card rounded-2xl p-8 mb-8" style="z-index: 100; position: relative;">
        <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
          <i class="fas fa-tools text-primary mr-3"></i>
          Ferramentas Disponíveis
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          
          <!-- Card 1: Análise Gratuita -->
          <div class="relative">
            <div 
              onclick="toggleGratisDropdown()"
              class="tool-card bg-gradient-to-r from-success/10 to-success/5 hover:from-success/20 hover:to-success/10 border border-success/20 rounded-xl p-6 transition-all group cursor-pointer relative"
            >
              <div class="flex items-center gap-4 mb-4">
                <div class="w-14 h-14 bg-success/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform">
                  <i class="fas fa-gift text-success text-xl"></i>
                </div>
                <div class="flex-1">
                  <h3 class="text-lg font-semibold text-white">Análise Essencial</h3>
                  <p class="text-sm text-gray-300">Recursos fundamentais</p>
                </div>
                <i class="fas fa-chevron-down text-gray-400 transition-transform duration-300" id="gratisChevron"></i>
              </div>
              <span class="absolute top-4 right-4 bg-green-500 text-white text-xs px-3 py-1 rounded-full font-bold">FREE</span>
            </div>
            
            <div id="gratisDropdown" class="dropdown">
              <div class="grid grid-cols-1 gap-3">
                <a href="monitor-basico.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-chart-area text-success w-6"></i>
                  <div>
                    <div class="font-medium">Monitor Beta</div>
                    <div class="text-xs text-gray-400">Análise vs IBOVESPA</div>
                  </div>
                </a>
                
                <a href="rsl.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-robot text-pink-400 w-6"></i>
                  <div>
                    <div class="font-medium">RSL Radar</div>
                    <div class="text-xs text-gray-400">Momentum atual da empresa</div>
                  </div>
                </a>
            
                <a href="amplitude.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-chart-bar text-orange-400 w-6"></i>
                  <div>
                    <div class="font-medium">Amplitude</div>
                    <div class="text-xs text-gray-400">Movimentação do Ativo</div>
                  </div>
                </a>

                <a href="descobertos.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-lightbulb text-yellow-400 w-6"></i>
                  <div>
                    <div class="font-medium">Novo Recurso</div>
                    <div class="text-xs text-gray-400">Descrição do recurso</div>
                  </div>
                </a>                
                
                <a href="sup_res_vol.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-chart-line text-blue-400 w-6"></i>
                  <div>
                    <div class="font-medium">Bandas De Volatilidade (Simples)</div>
                    <div class="text-xs text-gray-400">Com base em Volatilidade</div>
                  </div>
                </a>
              </div>
            </div>
          </div>

          <!-- Card 2: Monitor de Opções -->
          <div class="relative" id="opcoesCard">
            <div 
              onclick="toggleOpcoesDropdown()"
              class="tool-card bg-gradient-to-r from-orange-500/10 to-orange-500/5 hover:from-orange-500/20 hover:to-orange-500/10 border border-orange-500/20 rounded-xl p-6 transition-all group cursor-pointer relative"
            >
              <div class="flex items-center gap-4 mb-4">
                <div class="w-14 h-14 bg-orange-500/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform">
                  <i class="fas fa-chart-pie text-orange-400 text-xl"></i>
                </div>
                <div class="flex-1">
                  <h3 class="text-lg font-semibold text-white">Monitor de Opções</h3>
                  <p class="text-sm text-gray-300">Análise Completa + IA</p>
                </div>
                <i class="fas fa-chevron-down text-gray-400 transition-transform duration-300" id="opcoesChevron"></i>
              </div>
              <span class="absolute top-4 right-4 bg-orange-500 text-white text-xs px-3 py-1 rounded-full font-bold">COMUNIDADE</span>
            </div>
            
            <div id="opcoesDropdown" class="dropdown">
              <div class="grid grid-cols-1 gap-3">
                <a href="vi-pro.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-search text-purple-400 w-6"></i>
                  <div>
                    <div class="font-medium">Implícita Sigma</div>
                    <div class="text-xs text-gray-400">Análise integrada de volatilidade</div>
                  </div>
                </a>
                
                <a href="regimes-pro.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-chart-area text-purple-400 w-6"></i>
                  <div>
                    <div class="font-medium">Bandas De Volatilidade</div>
                    <div class="text-xs text-gray-400">GARCH + XGBoost + Validação IV</div>
                  </div>
                </a>
                
                <a href="gamma-levels.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-layer-group text-purple-400 w-6"></i>
                  <div>
                    <div class="font-medium">Gamma Levels</div>
                    <div class="text-xs text-gray-400">Exposição gamma e walls de suporte/resistência</div>
                  </div>
                </a>  

                <a href="rank-volatilidade.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-search text-green-400 w-6"></i>
                  <div>
                    <div class="font-medium">IV Scanner</div>
                    <div class="text-xs text-gray-400">Scanner de Volatilidade Implícita</div>
                  </div>
                </a>
                
                <a href="opcoes.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-crosshairs text-orange-400 w-6"></i>
                  <div>
                    <div class="font-medium">Hunter Walls</div>
                    <div class="text-xs text-gray-400">Volume de negócios por Strike</div>
                  </div>
                </a>
              </div>
            </div>
          </div>

          <!-- Card 3: Machine Learning -->
          <div class="relative" id="mlCard">
            <div 
              onclick="toggleMLDropdown()"
              class="tool-card bg-gradient-to-r from-purple-500/10 to-purple-500/5 hover:from-purple-500/20 hover:to-purple-500/10 border border-purple-500/20 rounded-xl p-6 transition-all group cursor-pointer relative"
            >
              <div class="flex items-center gap-4 mb-4">
                <div class="w-14 h-14 bg-purple-500/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform">
                  <i class="fas fa-brain text-purple-400 text-xl"></i>
                </div>
                <div class="flex-1">
                  <h3 class="text-lg font-semibold text-white">Machine Learning</h3>
                  <p class="text-sm text-gray-300">IA Preditiva + Algoritmos</p>
                </div>
                <i class="fas fa-chevron-down text-gray-400 transition-transform duration-300" id="mlChevron"></i>
              </div>
              <span class="absolute top-4 right-4 bg-purple-600 text-white text-xs px-3 py-1 rounded-full font-bold">COMUNIDADE</span>
            </div>
            
            <div id="mlDropdown" class="dropdown">
              <div class="grid grid-cols-1 gap-3">
                <a href="swing-trade-machine-learning.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-chart-line text-green-400 w-6"></i>
                  <div>
                    <div class="font-medium">Swing Trade ML</div>
                    <div class="text-xs text-gray-400">IA Preditiva com Stops Dinâmicos</div>
                  </div>
                </a>
                
                <a href="beta-regression.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-calculator text-blue-400 w-6"></i>
                  <div>
                    <div class="font-medium">Beta Regression</div>
                    <div class="text-xs text-gray-400">Trading c/ beta-movel</div>
                  </div>
                </a>
                
                <a href="atsmom.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition-colors text-white">
                  <i class="fas fa-rocket text-purple-400 w-6"></i>
                  <div>
                    <div class="font-medium">ATSMOM</div>
                    <div class="text-xs text-gray-400">Adaptive Time Series Momentum</div>
                  </div>
                </a>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- Coming Soon Section -->
      <!-- Coming Soon Section - SEM OS SUBTÍTULOS/CHECKLIST -->
<div class="card rounded-2xl p-8 mb-8">
  <div class="flex items-center justify-between mb-6">
    <div>
      <h2 class="text-2xl font-bold text-white mb-2 flex items-center">
        <i class="fas fa-rocket text-yellow-400 mr-3"></i>
        Em Desenvolvimento
      </h2>
      <p class="text-gray-300">Próximos indicadores e ferramentas exclusivas</p>
    </div>
    <div class="flex items-center gap-2">
      <span class="bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-3 py-1 rounded-full text-xs font-bold">
        <i class="fas fa-star mr-1"></i>
        NOVIDADES
      </span>
    </div>
  </div>
  
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    
    <!-- Gamma Levels -->
    <div class="coming-soon-card rounded-xl p-6 transition-all group hover:scale-105">
      <div class="flex items-center gap-4 mb-4">
        <div class="w-14 h-14 bg-yellow-500/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform">
          <i class="fas fa-layer-group text-yellow-400 text-xl"></i>
        </div>
        <div class="flex-1">
          <h3 class="text-lg font-semibold text-white">Gamma Levels</h3>
          <p class="text-sm text-gray-300">Níveis de suporte e resistência via Gamma</p>
        </div>
      </div>
      
      <span class="coming-soon-badge mb-3">
        <i class="fas fa-clock"></i>
        Já disponível
      </span>

    </div>

    <!-- Volume Profile -->
    <div class="coming-soon-card rounded-xl p-6 transition-all group hover:scale-105">
      <div class="flex items-center gap-4 mb-4">
        <div class="w-14 h-14 bg-blue-500/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform">
          <i class="fas fa-chart-bar text-blue-400 text-xl"></i>
        </div>
        <div class="flex-1">
          <h3 class="text-lg font-semibold text-white">Analise De Delta</h3>
          <p class="text-sm text-gray-300">Análise avançada do movimento do Delta da opção</p>
        </div>
      </div>
      
      <span class="coming-soon-badge mb-3">
        <i class="fas fa-cog"></i>
        Planejando
      </span>
      


    </div>

    <!-- Delta Analysis -->
    <div class="coming-soon-card rounded-xl p-6 transition-all group hover:scale-105">
      <div class="flex items-center gap-4 mb-4">
        <div class="w-14 h-14 bg-purple-500/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform">
          <i class="fas fa-arrows-alt-h text-purple-400 text-xl"></i>
        </div>
        <div class="flex-1">
          <h3 class="text-lg font-semibold text-white">Reinforcement Learning (RL) </h3>
          <p class="text-sm text-gray-300">Aprendizado baseada em interação, onde o modelo testa diferentes estratégias de compra e venda, avalia os resultados</p>
        </div>
      </div>
      
      <span class="coming-soon-badge mb-3">
        <i class="fas fa-lightbulb"></i>
        Ideias
      </span>
      

    </div>

  </div>
  

</div>
      
   

    </div>
  </main>

  <script>
    
    let currentUser = null;
    let userToken = null;
    let userPlan = 'trial'; // FORÇA TRIAL POR PADRÃO

    // Initialize dashboard
    async function initDashboard() {
      console.log('🚀 Inicializando Dashboard Geminii...');
      
      tryLoadFromLocalStorage();
      await checkAuth();
      await loadFreeRecommendationsStatsWithRetry();
      checkApiStatus();
      setInterval(checkApiStatus, 30000);
      
      // APLICAR CONTROLES DE ACESSO (substituir forceUnlockEverything)
      setTimeout(applyAccessControls, 500);
      
      console.log('✅ Dashboard inicializado!');
    }

    function tryLoadFromLocalStorage() {
      try {
        const userData = localStorage.getItem('geminii_user');
        if (userData) {
          const user = JSON.parse(userData);
          if (user && user.name) {
            console.log('📦 Carregando dados do localStorage:', user.name);
            updateUserInterface(user);
          }
        }
      } catch (error) {
        console.log('⚠️ Erro no localStorage:', error);
      }
    }

    function checkUserPlan(user) {
      console.log('🔍 Verificando plano do usuário:', user);
      console.log('📊 user_type:', user.user_type, 'plan_id:', user.plan_id);
      
      // ACESSO TOTAL: admin, paid, trial
      if (user.user_type === 'admin') {
        console.log('👑 ADMIN DETECTADO - ACESSO TOTAL');
        userPlan = 'admin';
        return 'admin';
      }
      
      if (user.user_type === 'paid') {
        console.log('💰 PAID DETECTADO - ACESSO TOTAL');
        userPlan = 'paid';
        return 'paid';
      }
      
      if (user.user_type === 'trial') {
        console.log('⏰ TRIAL DETECTADO - ACESSO TOTAL');
        userPlan = 'trial';
        return 'trial';
      }
      
      // ACESSO FREE: regular
      if (user.user_type === 'regular') {
        console.log('🆓 REGULAR DETECTADO - ACESSO LIMITADO');
        userPlan = 'free';
        return 'free';
      }
      
      // Fallback para free
      console.log('⚠️ USER_TYPE NÃO IDENTIFICADO - DEFAULTING PARA FREE');
      userPlan = 'free';
      return 'free';
    }

    function applyAccessControls() {
      console.log('🔒 Aplicando controles de acesso para user_type:', userPlan);
      
      const opcoesCard = document.getElementById('opcoesCard');
      const mlCard = document.getElementById('mlCard');
      
      // SÓ BLOQUEIA SE FOR REGULAR (user_type = 'regular')
      if (userPlan === 'free') {
        console.log('❌ BLOQUEANDO ACESSO - USUÁRIO REGULAR');
        
        // Bloquear cards...
        [opcoesCard, mlCard].forEach(card => {
          if (card) {
            card.style.opacity = '0.5';
            card.style.cursor = 'not-allowed';
            card.style.pointerEvents = 'none';
            
            if (!card.querySelector('.access-overlay')) {
              const overlay = document.createElement('div');
              overlay.className = 'access-overlay absolute inset-0 bg-black/70 rounded-xl flex items-center justify-center z-20';
              overlay.innerHTML = `
                <div class="text-center p-4">
                  <i class="fas fa-lock text-yellow-400 text-3xl mb-3"></i>
                  <p class="text-white font-bold mb-2">Acesso Comunidade</p>
                  <p class="text-gray-300 text-sm mb-3">Faça upgrade para acessar</p>
                  <button onclick="window.open('planos.html', '_blank')" class="bg-gradient-to-r from-primary to-secondary text-white px-4 py-2 rounded-lg text-sm font-semibold hover:scale-105 transition-transform">
                    <i class="fas fa-crown mr-2"></i>Upgrade
                  </button>
                </div>
              `;
              card.style.position = 'relative';
              card.appendChild(overlay);
            }
          }
        });
      } else {
        // LIBERA TUDO para admin, paid, trial
        console.log('✅ LIBERANDO ACESSO TOTAL para user_type:', userPlan);
        
        [opcoesCard, mlCard].forEach(card => {
          if (card) {
            card.style.opacity = '1';
            card.style.cursor = 'pointer';
            card.style.pointerEvents = 'auto';
            
            const overlay = card.querySelector('.access-overlay');
            if (overlay) overlay.remove();
          }
        });
      }
    }

    // Função para configurar os links dos planos
    function configurarLinksPlanos() {
      // Substitua pelos seus links reais
      const links = {
        carteira: 'https://geminii.com.br/assinaturas/',
        swingTrade: 'https://geminii.com.br/swing-position/', 
        positionTrade: 'https://geminii.com.br/st-opcoes/',
        consultoria: 'https://geminii.com.br/consultoria/',
        saibaMais: 'https://geminii.com.br/',
        
      };

      // Aplicar os links
      document.getElementById('carteiraLink').href = links.carteira;
      document.getElementById('swingTradeLink').href = links.swingTrade;
      document.getElementById('positionTradeLink').href = links.positionTrade;
      document.getElementById('consultoriaLink').href = links.consultoria;
      document.getElementById('saibaMaisLink').href = links.saibaMais;
      
    }

    // Chamar a função na inicialização
    document.addEventListener('DOMContentLoaded', () => {
      configurarLinksPlanos();
      initDashboard();
    });


    
    function updatePlanInterface(plan, user = null) {
      const planBadge = document.getElementById('userPlanBadge');
      const upgradeBtn = document.getElementById('upgradeBtn');
      const trialInfo = document.getElementById('trialInfo');
      const trialDaysLeft = document.getElementById('trialDaysLeft');
      
      if (plan === 'admin') {
        planBadge.className = 'community-badge';
        planBadge.innerHTML = '<i class="fas fa-crown"></i>Administrador';
        upgradeBtn.style.display = 'inline-block'
        upgradeBtn.classList.add('hidden');
        trialInfo.classList.add('hidden');
      } else if (plan === 'paid') {
        planBadge.className = 'community-badge';
        planBadge.innerHTML = '<i class="fas fa-star"></i>Comunidade';
        upgradeBtn.style.display = 'inline-block'
        upgradeBtn.classList.add('hidden');
        trialInfo.classList.add('hidden');
      } else if (plan === 'trial') {
        planBadge.className = 'trial-badge';
        planBadge.innerHTML = '<i class="fas fa-clock"></i>Trial Ativo';
        upgradeBtn.style.display = 'inline-block'
        upgradeBtn.classList.remove('hidden');
        trialInfo.classList.remove('hidden');
        
        let daysLeft = 15;
        if (user && user.trial_end_date) {
          const now = new Date();
          const trialEnd = new Date(user.trial_end_date);
          daysLeft = Math.ceil((trialEnd - now) / (1000 * 60 * 60 * 24));
        }
        
        trialDaysLeft.textContent = Math.max(0, daysLeft);
      } else {
        planBadge.className = 'free-badge';
        planBadge.innerHTML = '<i class="fas fa-user"></i>Plano Free';
        upgradeBtn.classList.remove('hidden');
        trialInfo.classList.add('hidden');
      }
    }

    async function checkAuth() {
      const token = localStorage.getItem('geminii_token');
      const userData = localStorage.getItem('geminii_user');
    
      if (!token || !userData) {
        console.log('❌ Redirecionando para login...');
        window.location.href = '/login.html';
        return;
      }
    
      try {
        const response = await fetch('/auth/verify', {
          headers: { 
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          }
        });
    
        const result = await response.json();
        
        if (result.success && result.data && result.data.user) {
          userToken = token;
          currentUser = result.data.user;
          
          const plan = checkUserPlan(currentUser);
          updatePlanInterface(plan, currentUser);
          updateUserInterface(currentUser);
          
          localStorage.setItem('geminii_user', JSON.stringify(currentUser));
        } else {
          localStorage.removeItem('geminii_token');
          localStorage.removeItem('geminii_user');
          window.location.href = '/login.html';
        }
      } catch (error) {
        console.error('Erro na verificação:', error);
        // USAR DADOS DO LOCALSTORAGE EM CASO DE ERRO
        try {
          const user = JSON.parse(userData);
          currentUser = user;
          userToken = token;
          const plan = checkUserPlan(user);
          updatePlanInterface(plan, user);
          updateUserInterface(user);
        } catch (e) {
          window.location.href = '/login.html';
        }
      }
    }

    function updateUserInterface(user) {
      if (!user) return;

      const userInitialsEl = document.getElementById('userInitials');
      const userNameEl = document.getElementById('userName');
      const userEmailEl = document.getElementById('userEmail');
      const memberSinceEl = document.getElementById('memberSince');

      if (user.name) {
        const initials = user.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
        if (userInitialsEl) userInitialsEl.textContent = initials;
        if (userNameEl) userNameEl.textContent = user.name;
      }

      if (user.email && userEmailEl) {
        userEmailEl.textContent = user.email;
      }

      if (user.created_at && memberSinceEl) {
        const createdDate = new Date(user.created_at).toLocaleDateString('pt-BR');
        memberSinceEl.textContent = createdDate;
      }
    }

    function getNextMonthlyUpdate() {
      const today = new Date();
      const firstOfCurrentMonth = new Date(today.getFullYear(), today.getMonth(), 1);
      
      // Se ainda não passou do dia 1º deste mês
      if (today.getDate() === 1) {
        return 30; // Próximo mês
      } else {
        // Próximo mês
        const firstOfNextMonth = new Date(today.getFullYear(), today.getMonth() + 1, 1);
        const daysLeft = Math.ceil((firstOfNextMonth - today) / (1000 * 60 * 60 * 24));
        return daysLeft;
      }
    }

    async function loadFreeRecommendationsStatsWithRetry(attempt = 1) {
      if (!userToken) return;

      try {
        const response = await fetch('/api/recommendations/free/all', {
          headers: { 
            'Authorization': `Bearer ${userToken}`,
            'Content-Type': 'application/json'
          }
        });

        if (response.ok) {
          const result = await response.json();
          if (result.success) {
            const allRecs = result.recommendations || [];
            const activeRecs = allRecs.filter(r => r.status === 'ATIVA');
            const closedRecs = allRecs.filter(r => r.status && r.status.startsWith('FINALIZADA'));
            const wins = closedRecs.filter(r => r.status === 'FINALIZADA_GANHO');
            const successRate = closedRecs.length > 0 ? (wins.length / closedRecs.length * 100) : 0;
            
            const activeSignalsEl = document.getElementById('activeSignalsCount');
            const successRateEl = document.getElementById('freeSuccessRate');
            const nextUpdateEl = document.getElementById('nextUpdateDays');
            
            if (activeSignalsEl) activeSignalsEl.textContent = activeRecs.length;
            if (successRateEl) successRateEl.textContent = successRate > 0 ? `${successRate.toFixed(1)}%` : '--';
            if (nextUpdateEl) nextUpdateEl.textContent = `${getNextMonthlyUpdate()} dias`;
          }
        }
      } catch (error) {
        console.error('Erro ao carregar recomendações:', error);
        setDefaultRecommendationValues();
      }
    }

    function setDefaultRecommendationValues() {
      const activeSignalsEl = document.getElementById('activeSignalsCount');
      const successRateEl = document.getElementById('freeSuccessRate');
      const nextUpdateEl = document.getElementById('nextUpdateDays');
      
      if (activeSignalsEl) activeSignalsEl.textContent = '--';
      if (successRateEl) successRateEl.textContent = '--';
      if (nextUpdateEl) nextUpdateEl.textContent = '--';
    }

    function closeOtherDropdowns(except) {
      const allDropdowns = ['mlDropdown', 'opcoesDropdown', 'gratisDropdown'];
      const allChevrons = ['mlChevron', 'opcoesChevron', 'gratisChevron'];
      
      allDropdowns.forEach((dropdownId, index) => {
        if (!except.includes(dropdownId)) {
          const dropdown = document.getElementById(dropdownId);
          const chevron = document.getElementById(allChevrons[index]);
          
          if (dropdown && dropdown.classList.contains('show')) {
            dropdown.classList.remove('show');
            if (chevron) chevron.style.transform = 'rotate(0deg)';
          }
        }
      });
    }

    function toggleGratisDropdown() {
      console.log('📱 Abrindo Gratis Dropdown');
      const dropdown = document.getElementById('gratisDropdown');
      const chevron = document.getElementById('gratisChevron');
      
      closeOtherDropdowns(['gratisDropdown']);
      
      if (dropdown && chevron) {
        if (dropdown.classList.contains('show')) {
          dropdown.classList.remove('show');
          chevron.style.transform = 'rotate(0deg)';
        } else {
          dropdown.classList.add('show');
          chevron.style.transform = 'rotate(180deg)';
        }
      }
    }

    function toggleMLDropdown() {
      if (userPlan === 'free') {
        alert('🔒 Este recurso está disponível apenas para assinantes da Comunidade!\n\nFaça upgrade para acessar todas as ferramentas.');
        return;
      }
      
      console.log('🧠 Abrindo ML Dropdown - user_type:', userPlan);
      
      const dropdown = document.getElementById('mlDropdown');
      const chevron = document.getElementById('mlChevron');
      
      closeOtherDropdowns(['mlDropdown']);
      
      if (dropdown && chevron) {
        if (dropdown.classList.contains('show')) {
          dropdown.classList.remove('show');
          chevron.style.transform = 'rotate(0deg)';
        } else {
          dropdown.classList.add('show');
          chevron.style.transform = 'rotate(180deg)';
        }
      }
    }

    // Netflix-style navigation functions
    function setupNetflixNavigation() {
      // Video navigation
      const videoRow = document.getElementById('videoRow');
      const videoNavLeft = document.getElementById('videoNavLeft');
      const videoNavRight = document.getElementById('videoNavRight');
      
      videoNavLeft.addEventListener('click', () => {
        videoRow.scrollBy({ left: -300, behavior: 'smooth' });
      });
      
      videoNavRight.addEventListener('click', () => {
        videoRow.scrollBy({ left: 300, behavior: 'smooth' });
      });

      // Social navigation  
      const socialRow = document.getElementById('socialRow');
      const socialNavLeft = document.getElementById('socialNavLeft');
      const socialNavRight = document.getElementById('socialNavRight');
      
      socialNavLeft.addEventListener('click', () => {
        socialRow.scrollBy({ left: -300, behavior: 'smooth' });
      });
      
      socialNavRight.addEventListener('click', () => {
        socialRow.scrollBy({ left: 300, behavior: 'smooth' });
      });
    }

    // NOVA FUNÇÃO: Extrai ID do YouTube da URL
    function extractYouTubeVideoId(url) {
      const regex = /(?:https?:\/\/)?(?:www\.)?youtu(?:be)?\.(?:com|be)\/(?:watch\?v=|embed\/|v\/|)([^#&?]+)/;
      const match = url.match(regex);
      return match ? match[1] : null;
    }

    // NOVA FUNÇÃO: Gera thumbnail automática do YouTube
    function getYouTubeThumbnail(url, quality = 'maxresdefault') {
      const videoId = extractYouTubeVideoId(url);
      if (!videoId) return 'https://via.placeholder.com/300x169/1a1a1a/ffffff?text=Video';
      
      
      return `https://img.youtube.com/vi/${videoId}/${quality}.jpg`;
    }

    // NOVA FUNÇÃO: Atualiza automaticamente as thumbnails dos vídeos
    function updateVideoThumbnails() {
      // Lista seus vídeos do YouTube aqui (substitua pelas URLs reais)
      const youtubeVideos = [
        'https://www.youtube.com/watch?v=QPjOz_tYdpE&t=190s',
        'https://www.youtube.com/watch?v=1ifmf4AFHqw&t=393s',
        'https://www.youtube.com/watch?v=mefy0YlS5P4&list=PLSE569v8Vpe3aT-Va2wu4zXmuXncjlBYt',
        'https://www.youtube.com/watch?v=SJ2jtPAp8i4&t=568s',
        'https://www.youtube.com/watch?v=10bZWx39mKI&t=496s',
        'https://www.youtube.com/watch?v=It1UrfmvTHg&t=2309s'
      ];

      // Atualiza automaticamente as imagens
      const videoItems = document.querySelectorAll('#videoRow .netflix-item');
      
      videoItems.forEach((item, index) => {
        if (youtubeVideos[index]) {
          const img = item.querySelector('.netflix-thumbnail img');
          const thumbnailUrl = getYouTubeThumbnail(youtubeVideos[index]);
          
          if (img) {
            img.src = thumbnailUrl;
            img.onerror = function() {
              // Se maxres não existir, tenta hqdefault
              this.src = getYouTubeThumbnail(youtubeVideos[index], 'hqdefault');
            };
          }
          
          // Atualiza o link do clique
          item.setAttribute('onclick', `openVideo('${youtubeVideos[index]}')`);
        }
      });
    }

    function openVideo(url) {
      window.open(url, '_blank');
    }

    function openSocial(url) {
      window.open(url, '_blank');
    }

    // Initialize Netflix navigation
    // Initialize Netflix navigation
    document.addEventListener('DOMContentLoaded', () => {
      setupNetflixNavigation();
      
      // ATUALIZA AUTOMATICAMENTE VIDEOS E POSTS
      setTimeout(() => {
        updateVideoThumbnails();
        updateSocialPosts();
      }, 500);
    });

    // Make functions global
    window.openVideo = openVideo;
    window.openSocial = openSocial;
    window.updateVideoThumbnails = updateVideoThumbnails;
    window.updateSocialPosts = updateSocialPosts;
    window.downloadSocialScreenshot = downloadSocialScreenshot;


    //Configura posts do Instagram e X/Twitter
    function updateSocialPosts() {
      // Configure seus posts aqui
      const socialPosts = [
        {
          type: 'instagram',
          url: 'https://www.instagram.com/stories/highlights/18022937624723142/',  // Link do post real
          image: 'https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/instagram.svg?color=E4405F',
          title: 'Sobre Nós',
          description: 'Um pouco sobre a Geminii'
        },
        {
          type: 'twitter',
          url: 'https://x.com/geminiiresearch/status/1956375053106360719',
          image: 'https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/x.svg?color=1DA1F2',
          title: 'Posição Montada',
          description: 'BBAS3 antes da queda'
        },
        {
          type: 'instagram',
          url: 'https://www.instagram.com/p/DNWnpP0Rhlm/',
          image: 'https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/instagram.svg?color=E4405F',
          title: 'Alerta Ou Oportunidade',
          description: 'Bastidores da análise de bbas3'
        },
        {
          type: 'twitter',
          url: 'https://x.com/geminiiresearch/status/1945252729217065330',
          image: 'https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/x.svg?color=1DA1F2',
          title: 'Trend Flow',
          description: 'Uma nova visão sobre os prêmios das opções'
        },
        {
          type: 'instagram',
          url: 'https://www.instagram.com/geminiiresearch/p/DMqqQYYSxRo/',
          image: 'https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/instagram.svg?color=E4405F',
          title: 'Dica de Leitura',
          description: 'Expoente de Hurst'
        },
        {
          type: 'twitter', 
          url: 'https://x.com/geminiiresearch/status/POST_ID_3',
          image: 'https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/x.svg?color=1DA1F2',
          title: 'Sua Opinião',
          description: 'IBOV: Alta ou Baixa?'
        }
      ];

      // Atualiza automaticamente os posts sociais
      const socialItems = document.querySelectorAll('#socialRow .netflix-item');
      
      socialItems.forEach((item, index) => {
        if (socialPosts[index]) {
          const post = socialPosts[index];
          const img = item.querySelector('.netflix-thumbnail img');
          const overlay = item.querySelector('.social-overlay');
          const title = item.querySelector('.netflix-info h4');
          const description = item.querySelector('.netflix-info p');
          
          if (img) {
            // Se você não tiver a imagem ainda, gera placeholder personalizado
            if (post.image.includes('assets/') && !post.image.includes('http')) {
              img.src = generateSocialPlaceholder(post.type, post.title);
            } else {
              img.src = post.image;
            }
            
            img.onerror = function() {
              this.src = generateSocialPlaceholder(post.type, post.title);
            };
          }
          
          if (overlay) {
            const icon = overlay.querySelector('i');
            const span = overlay.querySelector('span');
            
            if (post.type === 'instagram') {
              icon.className = 'fab fa-instagram';
              span.textContent = getInstagramType(post.url);
              overlay.style.background = 'linear-gradient(45deg, #833ab4, #fd1d1d, #fcb045)';
            } else {
              icon.className = 'fab fa-x-twitter'; 
              span.textContent = getTwitterType(post.url);
              overlay.style.background = 'rgba(0, 0, 0, 0.8)';
            }
          }
          
          if (title) title.textContent = post.title;
          if (description) description.textContent = post.description;
          
          // Atualiza o link do clique
          item.setAttribute('onclick', `openSocial('${post.url}')`);
        }
      });
    }

    // NOVA FUNÇÃO: Gera placeholder personalizado para redes sociais
    function generateSocialPlaceholder(type, title) {
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = 300;
      canvas.height = 300;
      
      // Background baseado na rede social
      if (type === 'instagram') {
        const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
        gradient.addColorStop(0, '#833ab4');
        gradient.addColorStop(0.5, '#fd1d1d');  
        gradient.addColorStop(1, '#fcb045');
        ctx.fillStyle = gradient;
      } else {
        ctx.fillStyle = '#1DA1F2';
      }
      
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // Ícone da rede social
      ctx.fillStyle = 'white';
      ctx.font = 'bold 48px Arial';
      ctx.textAlign = 'center';
      ctx.fillText(type === 'instagram' ? '📷' : '🐦', canvas.width/2, canvas.height/2 - 20);
      
      // Título
      ctx.font = 'bold 16px Arial';
      ctx.fillText(title.substring(0, 20), canvas.width/2, canvas.height/2 + 30);
      
      return canvas.toDataURL();
    }

    // NOVA FUNÇÃO: Detecta tipo de conteúdo do Instagram
    function getInstagramType(url) {
      if (url.includes('/stories/')) return 'Stories';
      if (url.includes('/reel/')) return 'Reels';  
      if (url.includes('/p/')) return 'Post';
      return 'Instagram';
    }

    // NOVA FUNÇÃO: Detecta tipo de conteúdo do Twitter/X
    function getTwitterType(url) {
      if (url.includes('status') && url.includes('/1')) return 'Thread';
      if (url.includes('status')) return 'Post';
      return 'X';
    }

    // NOVA FUNÇÃO: Baixa screenshot de posts (opcional - para usar depois)
    function downloadSocialScreenshot(url, filename) {
      // Esta função pode ser expandida para automatizar screenshots
      console.log(`Para fazer screenshot: ${url} -> salvar como ${filename}`);
      alert('📸 Faça um screenshot deste post e salve como: ' + filename);
      window.open(url, '_blank');
    }



    function toggleOpcoesDropdown() {
      if (userPlan === 'free') {
        alert('🔒 Este recurso está disponível apenas para assinantes da Comunidade!\n\nFaça upgrade para acessar todas as ferramentas.');
        return;
      }
      
      console.log('📊 Abrindo Opcoes Dropdown - user_type:', userPlan);
      
      const dropdown = document.getElementById('opcoesDropdown');
      const chevron = document.getElementById('opcoesChevron');
      
      closeOtherDropdowns(['opcoesDropdown']);
      
      if (dropdown && chevron) {
        if (dropdown.classList.contains('show')) {
          dropdown.classList.remove('show');
          chevron.style.transform = 'rotate(0deg)';
        } else {
          dropdown.classList.add('show');
          chevron.style.transform = 'rotate(180deg)';
        }
      }
    }

    async function logout() {
      try {
        if (userToken) {
          await fetch('/auth/logout', {
            method: 'POST',
            headers: { 'Authorization': `Bearer ${userToken}` }
          });
        }
      } catch (error) {
        console.error('Erro no logout:', error);
      } finally {
        localStorage.removeItem('geminii_token');
        localStorage.removeItem('geminii_user');
        window.location.href = '/';
      }
    }

    async function checkApiStatus() {
      if (!userToken) return;
      
      try {
        const response = await fetch('/auth/verify', {
          headers: { 'Authorization': `Bearer ${userToken}` }
        });
        
        const statusEl = document.getElementById('statusIndicator');
        if (statusEl) {
          if (response.ok) {
            statusEl.innerHTML = `
              <div class="w-2 h-2 bg-success rounded-full animate-pulse"></div>
              <span class="text-sm text-gray-300">Online</span>
            `;
          } else {
            statusEl.innerHTML = `
              <div class="w-2 h-2 bg-danger rounded-full animate-pulse"></div>
              <span class="text-sm text-gray-300">Offline</span>
            `;
          }
        }
      } catch (error) {
        const statusEl = document.getElementById('statusIndicator');
        if (statusEl) {
          statusEl.innerHTML = `
            <div class="w-2 h-2 bg-danger rounded-full animate-pulse"></div>
            <span class="text-sm text-gray-300">Offline</span>
          `;
        }
      }
    }

    // Make functions global
    window.logout = logout;
    window.toggleMLDropdown = toggleMLDropdown;
    window.toggleOpcoesDropdown = toggleOpcoesDropdown;
    window.toggleGratisDropdown = toggleGratisDropdown;

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', initDashboard);
  </script>
  
</body>
</html>